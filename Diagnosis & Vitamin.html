<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Konsultasi Sekarang</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="assets/img/llogo.png" rel="icon" type="image/png">

  <link href="assets/img/llogo.png" rel="llogo">


  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: Medilab
  * Template URL: https://bootstrapmade.com/medilab-free-medical-bootstrap-theme/
  * Updated: Aug 07 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="index-page">

  <header id="header" class="header sticky-top">

    <div class="topbar d-flex align-items-center">
      <div class="container d-flex justify-content-center justify-content-md-between">
        <div class="contact-info d-flex align-items-center">
          <i class="bi bi-envelope d-flex align-items-center"><a href="mailto:contact@example.com">sistempakar@gmail.com</a></i>
          <i class="bi bi-phone d-flex align-items-center ms-4"><span>+6282349152189</span></i>
        </div>
        <div class="social-links d-none d-md-flex align-items-center">
          <a href="#" class="twitter"><i class="bi bi-twitter-x"></i></a>
          <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
          <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
          <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></a>
        </div>
      </div>
    </div><!-- End Top Bar -->

    <div class="branding d-flex align-items-center">

      <div class="container position-relative d-flex align-items-center justify-content-between">
        <a href="index.html" class="llogo d-flex align-items-center me-auto">
          <!-- Uncomment the line below if you also wish to use an image llogo -->
          <!-- <img src="assets/img/llogo.png" alt=""> -->
          <h1 class="sitename">Vitamin</h1>
        </a>

        <nav id="navmenu" class="navmenu">
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="Petunujuk kegunaan.html">Petunjuk Penggunaan</a></li>
            <li><a href="Gejala & Solusi.html">Gejala & Solusi</a></li>
            <li><a href="Diagnosis & Vitamin.html">Diagnosis & Vitamin</a></li>
            
          </ul>
          <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
        </nav>

      </div>

    </div>


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnosis & Vitamin</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f6f9;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        h2 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }

        .form-container {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: bold;
            margin-bottom: 8px;
            color: #34495e;
        }

        input[type="text"],
        input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .symptoms-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .symptom-item {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #e9ecef;
        }

        .symptom-checkbox {
            margin-bottom: 10px;
        }

        select {
            width: 100%;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ddd;
            margin-top: 5px;
        }

        .submit-btn {
            background-color: #3498db;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            margin-top: 20px;
            transition: background-color 0.3s;
        }

        .submit-btn:hover {
            background-color: #2980b9;
        }

        .result-container {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            margin-top: 30px;
            display: none;
        }

        .result-title {
            color: #3498db;
            margin-bottom: 20px;
        }

        .result-content {
            margin-bottom: 20px;
        }

        .vitamin-list {
            list-style-type: none;
            padding: 0;
        }

        .vitamin-list li {
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }

        .confidence-score {
            font-weight: bold;
            color: #2c3e50;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Diagnosis & Vitamin</h2>
        
        <div class="form-container">
            <form id="diagnosisForm">
                <div class="form-group">
                    <label for="name">Nama:</label>
                    <input type="text" id="name" required>
                </div>

                <div class="form-group">
                    <label for="age">Usia:</label>
                    <input type="number" id="age" required>
                </div>

                <div class="form-group">
                    <label for="occupation">Pekerjaan:</label>
                    <input type="text" id="occupation" required>
                </div>

                <div class="symptoms-container" id="symptomsContainer">
                    <!-- Symptoms will be dynamically added here -->
                </div>

                <button type="button" class="submit-btn" onclick="calculateDiagnosis()">
                    Lihat Hasil Diagnosis
                </button>
            </form>
        </div>

        <div class="result-container" id="resultContainer">
            <h3 class="result-title">Hasil Diagnosis</h3>
            <div class="result-content" id="diagnosisResult"></div>
            <ul class="vitamin-list" id="vitaminList"></ul>
            <div class="confidence-score" id="confidenceScore"></div>
        </div>
    </div>

    <script>
        // Data penyakit dan gejala
        const diseases = {
            anemia: {
                name: "Anemia Defisiensi Besi",
                symptoms: {
                    "Lelah berkepanjangan": 5,
                    "Pusing saat berdiri": 3,
                    "Kulit dan bibir pucat": 3,
                    "Sesak napas saat beraktivitas": 5,
                    "Detak jantung cepat": 5,
                    "Kuku rapuh": 5
                },
                vitamins: [
                    "Vitamin C: Membantu penyerapan zat besi dari makanan",
                    "Vitamin B12: Meningkatkan produksi sel darah merah",
                    "Folat: Meningkatkan produksi sel darah merah"
                ]
            },
            osteoporosis: {
                name: "Osteoporosis",
                symptoms: {
                    "Nyeri tulang": 5,
                    "Kehilangan tinggi badan": 5,
                    "Patah tulang dengan trauma ringan": 5,
                    "Postur tubuh membungkuk": 5
                },
                vitamins: [
                    "Vitamin D: Mendukung penyerapan kalsium, penting untuk kesehatan tulang",
                    "Vitamin K: Membantu pembentukan dan penguatan tulang",
                    "Kalsium: Suplemen penting untuk tulang"
                ]
            },
            heartDisease: {
                name: "Penyakit Jantung",
                symptoms: {
                    "Sesak napas saat beraktivitas": 5,
                    "Detak jantung cepat": 5,
                    "Nyeri atau tekanan di dada": 5,
                    "Detak jantung tidak teratur": 5,
                    "Kelelahan setelah aktivitas ringan": 3,
                    "Pembengkakan di kaki": 5
                },
                vitamins: [
                    "Vitamin B6, B12, dan Folat: Membantu menurunkan kadar homosistein",
                    "Vitamin D: Mendukung fungsi jantung yang sehat",
                    "Omega-3: Penting untuk kesehatan jantung"
                ]
            },
            diabetes: {
                name: "Diabetes Tipe 2",
                symptoms: {
                    "Rasa haus berlebihan": 3,
                    "Sering buang air kecil": 3,
                    "Kelelahan terus menerus": 3,
                    "Penglihatan kabur": 5
                },
                vitamins: [
                    "Vitamin D: Mendukung sensitivitas insulin",
                    "Vitamin B1 (Tiamin): Membantu metabolisme karbohidrat",
                    "Vitamin C dan Vitamin E: Antioksidan yang membantu mengurangi stres oksidatif"
                ]
            },
            ispa: {
                name: "Infeksi Saluran Pernapasan Atas (ISPA)",
                symptoms: {
                    "Batuk terus-menerus": 5,
                    "Demam": 3,
                    "Hidung tersumbat": 1
                },
                vitamins: [
                    "Vitamin C: Meningkatkan sistem imun dan mempercepat pemulihan",
                    "Vitamin D: Mendukung daya tahan tubuh terhadap infeksi"
                ]
            }
        };

        // Bobot frekuensi gejala
        const frequencyWeights = {
            "Sering Terasa": 5,
            "Kadang Terasa": 3,
            "Jarang Terasa": 1
        };

        // Membuat daftar gejala saat halaman dimuat
        window.onload = function() {
            const symptomsContainer = document.getElementById('symptomsContainer');
            const allSymptoms = new Set();

            // Mengumpulkan semua gejala unik
            Object.values(diseases).forEach(disease => {
                Object.keys(disease.symptoms).forEach(symptom => {
                    allSymptoms.add(symptom);
                });
            });

            // Membuat elemen untuk setiap gejala
            allSymptoms.forEach(symptom => {
                const symptomDiv = document.createElement('div');
                symptomDiv.className = 'symptom-item';

                const checkboxDiv = document.createElement('div');
                checkboxDiv.className = 'symptom-checkbox';

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = symptom.replace(/\s+/g, '');

                const label = document.createElement('label');
                label.htmlFor = checkbox.id;
                label.textContent = symptom;

                checkboxDiv.appendChild(checkbox);
                checkboxDiv.appendChild(label);

                const select = document.createElement('select');
                select.innerHTML = `
                    <option value="">Pilih Tingkat Keyakinan</option>
                    <option value="Sering Terasa">Sering Terasa</option>
                    <option value="Kadang Terasa">Kadang Terasa</option>
                    <option value="Jarang Terasa">Jarang Terasa</option>
                `;

                symptomDiv.appendChild(checkboxDiv);
                symptomDiv.appendChild(select);
                symptomsContainer.appendChild(symptomDiv);
            });
        };

        function calculateDiagnosis() {
            const name = document.getElementById('name').value;
            const age = document.getElementById('age').value;
            const occupation = document.getElementById('occupation').value;

            if (!name || !age || !occupation) {
                alert('Mohon lengkapi data diri Anda');
                return;
            }

            // Mengumpulkan gejala yang dipilih
            const selectedSymptoms = [];
            const symptomItems = document.querySelectorAll('.symptom-item');
            
            symptomItems.forEach(item => {
                const checkbox = item.querySelector('input[type="checkbox"]');
                const select = item.querySelector('select');
                
                if (checkbox.checked && select.value) {
                    selectedSymptoms.push({
                        name: checkbox.parentElement.querySelector('label').textContent,
                        frequency: select.value
                    });
                }
            });

            if (selectedSymptoms.length === 0) {
                alert('Mohon pilih minimal satu gejala beserta tingkat keyakinannya');
                return;
            }

            // Menghitung similarity untuk setiap penyakit
            // Menghitung similarity untuk setiap penyakit
const results = [];

for (const [diseaseKey, disease] of Object.entries(diseases)) {
    let numerator = 0;       // pembilang
    let denominator = 0;     // penyebut
    
    // Hitung total bobot semua gejala penyakit untuk penyebut
    Object.values(disease.symptoms).forEach(weight => {
        denominator += weight;
    });
    
    // Hitung matching untuk pembilang
    selectedSymptoms.forEach(symptom => {
        if (disease.symptoms[symptom.name]) {
            // Jika gejala cocok (1 * bobot gejala)
            numerator += disease.symptoms[symptom.name];
        }
    });
    
    // Hitung similarity
    const similarity = denominator > 0 ? numerator / denominator : 0;
    
    // Tambahkan ke hasil jika ada similarity
    if (similarity > 0) {
        results.push({
            disease: disease.name,
            similarity: similarity,
            vitamins: disease.vitamins,
            details: {
                matchingScore: numerator,
                totalWeight: denominator,
                similarityPercentage: (similarity * 100).toFixed(2) + '%'
            }
        });
    }
}

// Urutkan hasil berdasarkan similarity tertinggi
results.sort((a, b) => b.similarity - a.similarity);

// Menampilkan hasil
const resultContainer = document.getElementById('resultContainer');
const diagnosisResult = document.getElementById('diagnosisResult');
const vitaminList = document.getElementById('vitaminList');
const confidenceScore = document.getElementById('confidenceScore');

// Modifikasi bagian menampilkan hasil dalam function calculateDiagnosis()

if (results.length === 0) {
    diagnosisResult.innerHTML = "Tidak dapat menentukan diagnosis berdasarkan gejala yang dipilih.";
    vitaminList.innerHTML = "";
    confidenceScore.innerHTML = "";
} else {
    const topResult = results[0];
    
    // Membuat daftar gejala yang dipilih user dengan tingkat keyakinannya
    const selectedSymptomsHtml = selectedSymptoms
        .map(symptom => `
            <li>
                ${symptom.name} (${symptom.frequency})
            </li>
        `)
        .join('');
    
    diagnosisResult.innerHTML = `
        <p><strong>Nama:</strong> ${name}</p>
        <p><strong>Usia:</strong> ${age} tahun</p>
        <p><strong>Pekerjaan:</strong> ${occupation}</p>
        <p><strong>Gejala yang Anda Alami:</strong></p>
        <ul style="list-style-type: disc; margin-left: 20px; margin-bottom: 20px;">
            ${selectedSymptomsHtml}
        </ul>
        <p><strong>Diagnosis:</strong> ${topResult.disease} (Tingkat Keyakinan: ${topResult.details.similarityPercentage})</p>   
        </ul>
    `;
    
    vitaminList.innerHTML = "<h4>Rekomendasi Vitamin:</h4>" + 
        topResult.vitamins.map(vitamin => `<li>${vitamin}</li>`).join('');
    
    // Hapus confidenceScore karena sudah digabung dengan diagnosis
    confidenceScore.innerHTML = '';
}

resultContainer.style.display = 'block';
        }
    </script>
</body>
</html>